# 布隆过滤器

布隆过滤器（Bloom Filter）是一种空间效率极高的概率型数据结构，用于判断一个元素是否存在于一个集合中。它的特点是判断元素不存在时是准确的，但判断元素存在时可能有误判，即存在假阳性（False Positive），但不会有假阴性（False Negative）。以下详细介绍其原理。

## 数据结构

布隆过滤器本质上是一个很长的二进制向量（位数组）和一系列哈希函数。初始时，位数组的所有位都被置为 0。

## 插入操作

当要向布隆过滤器中插入一个元素时，按以下步骤执行：

1. 使用多个不同的哈希函数对该元素进行哈希运算，得到多个哈希值。
2. 将每个哈希值对位数组的长度取模，得到对应的数组下标。
3. 将这些下标对应的数组位都置为 1。

## 查询操作

当要查询一个元素是否存在于布隆过滤器中时，按以下步骤执行：

1. 使用同样的多个哈希函数对该元素进行哈希运算，得到多个哈希值。
2. 将每个哈希值对位数组的长度取模，得到对应的数组下标。
3. 检查这些下标对应的数组位是否都为 1：
    - 如果存在任何一个位为 0，那么该元素一定不存在于集合中。
    - 如果所有位都为 1，那么该元素可能存在于集合中（存在假阳性的可能）。

## 假阳性原因

假阳性产生的原因是不同的元素经过哈希运算后可能会映射到相同的位数组位置。当多个元素插入后，某些位置的 1 可能是由其他元素置位的，因此查询时即使元素实际上不存在，也可能所有对应位置都为 1。

## 优缺点

### 优点

- 空间效率高，只需要一个位数组和几个哈希函数，相比于传统的存储结构（如哈希表），占用空间大大减少。
- 插入和查询操作的时间复杂度都是 $O(k)$，其中 $k$ 是哈希函数的个数，效率非常高。

### 缺点

- 存在假阳性，不能 100% 准确判断元素是否存在。
- 不支持删除操作，因为删除一个元素可能会影响其他元素对应的位。
